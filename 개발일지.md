# 개발일지

- Material Design 적극 채용

  - 중구난방한 폰트사이즈 및 디자인이 규격화 돼있지 않은 문제를 해결

- Firebase를 이용한 이메일,소셜 로그인 및 비밀번호 재설정 기능 구현

  - 비밀번호 암호화 및 sdk를 통한 소셜 인증 구현을 손쉽게 할 수 있는 장점

- Styled Component 의 활용

  - 회원가입,로그인,비밀번호 재설정 페이지를 나눠서 중복되는 CSS 코드가 많았는데 Styled Components의 extend 기능을 활용하여 스타일을 컴포넌트화 시킴

- 메인페이지 디자인

  - [Figma Link](https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FN9FhxPgd0yB131bdw8Aj1X%2FToDo%3Fnode-id%3D0%253A1)
  - 구상만 할 때는 구현하고 싶은 기능이 굉장히 많았는데 스켈레톤 디자인을 하면서 데이터 구조, 기능 구현하는데 드는 노력 등등을 생각하니 너무 힘들겠다 싶었다. 일단 그래도 넣어보고싶은 최소한의 기능은 그려넣었지만 과유불급이라는 말이 있듯이 아주 작은 것부터 일단 쌓아올리면서 개발해보자. 완성 후에 시간이 남고 욕심이 든다면 그 때 기능을 추가해도 나쁘지않다. 그리고 나 자신이 쓸 예정이기 때문에 내가 불편하다면 기능을 추가해보겠지..

- Firebase NoSQL 데이터 추가 작업

  - 어려운 작업은 아니었다. firebase 문서에 따라 데이터베이스 참조 경로만 잘 입력하면 데이터를 넣을 수 있었다.
  - 데이터 구조
    - <img src='./markdownImg/data.png'><br>  
      데이터를 어떻게 꺼내 쓸지 고려하면서 짜봤는데 잘 짠건지 아닌지도 잘 모르겠다. 나중에 개선사항이 있으면 바꿔야 할 듯 하다.
    - ToDo와 Note의 컬렉션을 따로 구분하지 않고 한 곳에 넣어서 isNote라는 flag로 구분해서 쿼리문으로 꺼내오는게 더 나을듯하다. 데이터베이스 안에서 ToDo와 Note의 다른 점은 isDone 프로퍼티가 필요하냐인데 나중에 Note <-> ToDo 변환 기능을 넣을 때 어차피 넣어야 하니까 Note 여도 isDone은 있어야함.
  - 데이터를 추가할 때 Recoil State와 데이터베이스에 함께 넣어줌.

- Firebase 데이터 읽기 작업

  - 새로고침 시 처음 렌더링 때 그 날짜의 데이터를 데이터베이스에서 읽어온다.
  - 읽어온 데이터를 Recoil State에 추가한 후 렌더링.
  - 할일을 추가할 때마다 State에도 넣어주고 있으므로 snapshot을 쓰지 않더라도 바로 렌더링 할 수 있었다.

- Recoil Selector 의 기능

  - 진행중인 할일과 완료된 할일을 같은 State에서 두번의 map에 나눠서 렌더링을 하고 있었는데 Selector로 2차 가공을 한 뒤 최적화를 할 수 있었음.
  - 6/2 추가<br> firebase에서 note와 todo를 같은 콜렉션안에 보관하고 있는데 클라이언트 쪽에서는 나눠서 보관을 하고 있었음. db에서 한곳에 보관하고 있기에 쿼리를 나눌 필요도 없어서 데이터를 가져온 뒤 클라이언트쪽에서 todo와 note를 분리하는 쪽으로 리팩토링함. 진작에 왜 이렇게 안했는지 의문..

- 클릭 이벤트로 state 수정해야하는데 어떤 엘레멘트를 선택했는지 구별하는 효율적인 방법을 못찾겠음. className으로 구별할 수 있지만 모든 자식태그에 같은 className을 다 넣어도 되는건가? 싶어서 다른 방법을 모색중.

  - 해결방법
    - 원래라면 트리거 돼야할 엘레멘트의 모든 자식들한테도 클래스를 넣어야했지만 Element.closest() 메소드를 이용해서 트리거 클래스를 부모한테만 넣어도 될 수 있게 하였다

- React.memo 의 사용
  - React Developer tool을 사용하여 렌더링을 시각적으로 확인하니 불필요한 렌더링이 많이 확인되었다. 예를들면 절대 변하지 않는 Nav 컴포넌트나 todo를 만드는 Form 등이다. 때문에 state와 props의 변화가 없는 Nav,ContentForm 컴포넌트를 React.memo로 감싸주었다.
  - 또한 map으로 생성하는 li태그인 ToDo 컴포넌트 안의 인풋 밸류가 변할때마다 state의 변화를 주었는데, 그 때 map으로 생성된 다른 ToDo 컴포넌트들이 렌더링되길 원하지 않았기에 ToDo 컴포넌트도 React.memo를 사용하였다.
  - 렌더링최적화를 위한 React.memo를 무작정 도배하지 않고 쓸 때, 안 쓸 때를 구분하여 바람직한 성능 최적화를 기대해보고싶다.
